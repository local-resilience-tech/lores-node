# This docker compose file is used for backend development and local testing. The production
# docker build is in the root directory of this repository.
services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile-development
    ports:
      - "8000:8000"
      - "2022:2022/udp"
      - "2023:2023/udp"
    environment:
      - FRONTEND_PATH=/app/frontend
      - DATABASE_URL=sqlite:/app/main.sqlite
      - CONFIG_PATH=/app/config.toml
      - APP_REPOS_PATH=/app/app_repos
      - APPS_PATH=/local_apps
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./data/app_repos:/app/app_repos
